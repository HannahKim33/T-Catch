<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    <script th:src="@{/js/notice/list.js}"></script>
</head>
<body>
    <a th:href="@{/qna/insert}">문의 작성</a>
    <table border="1">
        <tr>
            <td>글번호</td>
            <td>글쓴이</td>
            <td>분류</td>
            <td>제목</td>
            <td>조회수</td>
            <td>등록일</td>
            <td>공개여부</td>
            <td>답변</td>
        </tr>
        <tr th:each="q:${list}">
            <td th:text="${q.qna_no}"></td>
            <td th:text="${q.custid}"></td>
            <td th:text="${q.qna_category}"></td>
            <td>
                <a th:href="@{'/qna/detail/'+${q.qna_no}}" th:text="${q.qna_title}"></a>
            </td>
            <td th:text="${q.qna_hit}"></td>
            <td th:text="${q.qna_date}"></td>
            <td th:text="${q.qna_open}"></td>
            <td th:text="${q.qna_answer}"></td>
        </tr>
    </table>

    <!--    카테고리별로 보기-->
    <div>카테고리별로 보기</div>
    <a href="/qna/list/1/all">전체</a><br>
    <a href="/qna/list/1/book">예매/드로우</a><br>
    <a href="/qna/list/1/transaction">결제/환불</a><br>
    <a href="/qna/list/1/etc">기타</a><br>

    <!--    검색-->
    <!--    JS로 searchColumn을 가져가기 위한 값 출력(지정한 searchColumn을 계속 유지하는 처리 하기 위해)-->
    <div hidden="hidden" th:text="${session.qnaSearchColumn}" id="div_searchColumn"></div>
    <div hidden="hidden" th:text="${session.qnaKeyword}" id="div_keyword"></div>

    <form action="/qna/list" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        <select name="searchColumn" id="select_column">
            <option value="qna_title">제목</option>
            <option value="qna_content">내용</option>
        </select>
        <input type="search" name="keyword" required id="keyword">
        <input type="submit" value="검색">
    </form>
    <a href="/qna/resetSearch">검색 초기화</a><br>

    <!--    페이지-->
    <th:block th:if="${firstPage}!=1">
        <a th:href="@{'/qna/list/'+${firstPage - 1}}">◀</a>
    </th:block>
    <th:block th:each="i: ${#numbers.sequence(firstPage, lastPage)}">
        <a th:href="@{'/qna/list/'+${i}}" th:text="${i}"></a>&nbsp
    </th:block>
    <th:block th:if="${lastPage}!=${totalPage}">
        <a th:href="@{'/qna/list/'+${lastPage+1}}">▶</a>
    </th:block>
</body>
</html>