<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
    <script th:src="@{/js/notice/list.js}"></script>
</head>
<body>
<!--    JS로 searchColumn을 가져가기 위한 값 출력(지정한 searchColumn을 계속 유지하는 처리 하기 위해)-->
    <div hidden="hidden" th:text="${session.searchColumn}" id="div_searchColumn"></div>

    <div th:if="${session.id}=='admin'">
        <a th:href="@{/admin/notice/insert}">등록</a>
    </div>
    <table border="1">
        <tr>
            <td>글번호</td>
            <td>분류</td>
            <td>제목</td>
            <td>조회수</td>
            <td>등록일</td>
        </tr>
        <tr th:each="n:${list}">
            <td th:text="${n.notice_no}"></td>
            <td th:text="${n.notice_category}"></td>
            <td>
                <a th:href="@{'/notice/detail/'+${n.notice_no}}" th:text="${n.notice_title}"></a>
            </td>
            <td th:text="${n.notice_hit}"></td>
            <td th:text="${n.notice_date}"></td>
        </tr>
    </table>

<!--    카테고리별로 보기-->
    <div>카테고리별로 보기</div>
    <a href="/notice/list/1/all">전체</a><br>
    <a href="/notice/list/1/book">예매/드로우</a><br>
    <a href="/notice/list/1/transaction">결제/환불</a><br>
    <a href="/notice/list/1/etc">기타</a><br>

<!--    검색-->
    <form action="/notice/list" method="post">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        <select name="searchColumn" id="select_column">
            <option value="notice_title">제목</option>
            <option value="notice_content">내용</option>
        </select>
        <input type="search" name="keyword" required>
        <input type="submit" value="검색">
    </form>

<!--    페이지-->
    <th:block th:if="${firstPage}!=1">
        <a th:href="@{'/notice/list/'+${firstPage - 1}}">◀</a>
    </th:block>
    <th:block th:each="i: ${#numbers.sequence(firstPage, lastPage)}">
        <a th:href="@{'/notice/list/'+${i}}" th:text="${i}"></a>&nbsp
    </th:block>
    <th:block th:if="${lastPage}!=${totalPage}">
        <a th:href="@{'/notice/list/'+${lastPage+1}}">▶</a>
    </th:block>
</body>
</html>